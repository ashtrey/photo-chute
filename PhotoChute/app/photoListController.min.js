(function(){"user strict";angular.module("photoApp").controller("photoListController",["instagramService",function(n){var t=this,i;t.photos=[];t.hasLoadedRemotely=!0;t.errorMessage="";t.isBusy=!1;t.maxCount=50;t.actualCount=0;t.loadFromService=function(){t.errorMessage="";t.isBusy=!0;t.hasLoadedRemotely=!0;t.actualCount=0;n.getPhotos(t.maxCount).then(function(n){localStorage.setItem("photoList",JSON.stringify(n));t.photos=n;t.actualCount=t.photos.length},function(n){t.errorMessage="Request failed"+(n.status?": "+n.status:"")}).finally(function(){t.isBusy=!1})};i=localStorage.getItem("photoList");i?(t.hasLoadedRemotely=!1,t.photos=angular.fromJson(i),t.actualCount=t.photos.length):t.loadFromService();t.getAuthorName=function(n){return n.user.full_name===""?"Anonymous":n.user.full_name}}])})();